<!DOCTYPE html>
<!-- saved from url=(0039)http://www.last.fm/user/FriskyLingo/now -->
<html lang="en" class="js lastfm js no-touch rgba backgroundsize boxshadow csstransforms csstransitions generatedcontent cssfilters" data-ad-zone="user:user:now" style="">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge; chrome=1">
      
	  <link rel="profile" href="http://purl.org/uF/2008/03/">
      
	  <!--–[if IE]--><!--[endif]–-->
      <title>[FriskyLingo] Now Playing...</title>
      
	  <meta name="viewport" content="width=device-width, initial-scale=1.0">

      <style>html {zoom: 1;}</style>
	  
      <script>
         if(top !== self && top.location.domain !== self.location.domain) {
             (function(d, s) {
                 if(s && s.insertRule) {
                     s.insertRule('body { display: none !important }', 0);
                 } else if(s && s.addRule) {
                     s.addRule('body', 'display: none !important');
                 }
                 top.location.replace(d.location.href);
             })(document, document.styleSheets[0]);
         }
      </script>
	  
      <link rel="stylesheet" href="http://cdn.last.fm/css/css/230382/themes/whittle.css">
	  
      <link rel="stylesheet" href="http://cdn.last.fm/css/css/230382/master.css">
	  
      <link rel="stylesheet" href="http://cdn.last.fm/css/css/230382/user/now.css">
	  
      <!--[if lt IE 9]>
      <script>
         window.html5 = {
             shivCSS: false
         }
      </script>
      <script src="http://cdn.last.fm/javascript/javascript/230502/lib/html5shiv.js"></script>
      <![endif]-->
		  
      <script src="http://code.jquery.com/jquery-latest.min.js"></script>
   </head>
   <!--[if lt IE 7 ]> 
   <body class="r-user a-now lang-en theme-whittle ie ie6">
      <![endif]-->
      <!--[if IE 7 ]>    
      <body class="r-user a-now lang-en theme-whittle ie ie7">
         <![endif]-->
         <!--[if IE 8 ]>    
         <body class="r-user a-now lang-en theme-whittle ie ie8">
            <![endif]-->
            <!--[if IE 9 ]>    
            <body class="r-user a-now lang-en theme-whittle ie ie9">
               <![endif]-->
               <!--[if (gt IE 9)|!(IE)]><!--> 
               <body class="r-user a-now lang-en theme-whittle" style="">
                  <!--<![endif]-->
                  <div class=" page-wrapper">
                     <div class="widget widget-user/now" data-url="/user/FriskyLingo/now" data-template="user/now" data-require="user/now">
                        <div class="art-container full-width-overlay">
                           <div class="art" style="background-image: none"></div>
                        </div>
						
                        <div class="track-details-wrapper full-width-overlay vertically-center-wrapper" data-utc="1392513746">
                           <div class="vertically-center">
                              <div class="track-details media media--overflow-visible">
                                 <a class="artwork media-pull-left media-link-hook" href="http://www.last.fm/user/FriskyLingo">
                                 	<img class="main-art" src="" alt="">
                                 </a>
								 
                                 <div class="media-body">
                                    <div class="vertically-center-wrapper">
                                       <div class="vertically-center track-meta">
                                          <h1 class="now-playing-subtext">
                                             <a href="http://www.last.fm/user/FriskyLingo" class="inherit strong">FriskyLingo</a>
											 <span id="spnStatusText"></span>
                                          </h1>
										  
                                          <a href="http://www.last.fm/user/FriskyLingo" class="track-name inherit media-link-reference"></a>
										  
                                          <p class="now-playing-subtext">
                                             by
                                          </p>
										  
                                          <div class="artist-name">
                                             <a href="http://www.last.fm/user/FriskyLingo" class="inherit"></a>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
					  <script>
						var lfmApiRootUrl = "http://ws.audioscrobbler.com/2.0/?";
						var userName = "FriskyLingo";
						var apiKey = "fc649436b9874100c0615546e3fba578";
						var lfmApiUserInfoUrl = '&user=' + userName + '&api_key=' + apiKey +'&format=json';

						var mostRecentTrack = {};

						setInterval(function() {
	  						//Get last.fm recent tracks for user
	  						jQuery.ajax({
	  						  url: lfmApiRootUrl + 'method=user.getRecentTracks' + lfmApiUserInfoUrl
	  							}).done(function(data){
	  								//console.log(data);
	  								var lfmUserRecentTracks2 = data.recenttracks;
	  								//console.log(lfmUserRecentTracks);
		
	  								var mostRecentTrack2 = lfmUserRecentTracks2.track[0];
									//console.log(mostRecentTrack);
									//console.log(mostRecentTrack2);
									
									if (mostRecentTrack2.name != mostRecentTrack.name) {
										//console.log("most recent track changed!");
										updateNowPlaying.onReady();
									}
								});
						}, 5000);

						//Get last.fm recent tracks for user
						var updateNowPlaying = {
							onReady: function () {
						jQuery.ajax({
						  url: lfmApiRootUrl + 'method=user.getRecentTracks' + lfmApiUserInfoUrl
							}).done(function(data){
								//console.log(data);
								var lfmUserRecentTracks = data.recenttracks;
								//console.log(lfmUserRecentTracks);
		
								mostRecentTrack = lfmUserRecentTracks.track[0];
								//console.log(mostRecentTrack);
		
								//Check if a track is currently playing
								if (mostRecentTrack['@attr'] != undefined) {
									//If the most recent track has @attr, it is currently being played
									//console.log("Currently Playing Track: [" + mostRecentTrack.name + "] by [" + mostRecentTrack.artist['#text'] + "]");
									jQuery('#spnStatusText').html(' is playing');
								} else {
									//If it doesn't have @attr, it's not currently playing
									//console.log("Most Recently Played Track: [" + mostRecentTrack.name + "] by [" + mostRecentTrack.artist['#text'] + "]");
									jQuery('#spnStatusText').html(' just played');
								}
								
								
								
								jQuery('.track-name')
									.text(mostRecentTrack.name)
									.attr('href', mostRecentTrack.url);
									
								jQuery('.artwork')
									.attr('href', mostRecentTrack.url);

								var artistInfo = {}; 

								jQuery.ajax({
							  	  url: lfmApiRootUrl + 'method=artist.getInfo&artist=' + mostRecentTrack.artist['#text'] + lfmApiUserInfoUrl
									}).done(function(data){
										//console.log(data.artist);
										artistInfo = data.artist;
										jQuery('.artist-name a')
											.text(mostRecentTrack.artist['#text'])
											.attr('href', data.artist.url);
											
											var imageUrl = "";
											var maxImageCount = 0;
								
											if (mostRecentTrack.album['#text'] != "") {
												//If the track DOES have an album, use the ALBUM artwork
												jQuery.ajax({
											  	  url: lfmApiRootUrl + 'method=album.getInfo&artist=' + mostRecentTrack.artist['#text'] + '&album=' + mostRecentTrack.album['#text'] + lfmApiUserInfoUrl
													}).done(function(data){
														//console.log(data.album);
											
														maxImageCount = mostRecentTrack.image.length - 1;
														imageUrl = mostRecentTrack.image[maxImageCount]['#text'];
											
														//console.log(imageUrl);
											
														jQuery('.art').css('background-image', 'url(' + imageUrl + ')');
														jQuery('.main-art').attr('src', imageUrl).attr('alt','Artwork for ' + mostRecentTrack.name);
												});
											} else {
												//If the track DOES NOT have an album, use ARTIST artwork
												maxImageCount = artistInfo.image.length - 1;
												
												imageUrl = artistInfo.image[maxImageCount]['#text'];
												jQuery('.art').css('background-image', 'url(' + imageUrl + ')');
												jQuery('.main-art').attr('src', imageUrl).attr('alt','Artwork for ' + mostRecentTrack.name);
											}
								});
							});
						}
					};
					
					updateNowPlaying.onReady();
					  </script>
   </body>
</html>